


















<html><head>
<title>&lt;yAir&gt; he walks down the street, picks something up and sells it for $30</title>

<style type="text/css">
	@import "all.css"; /* just some basic formatting, no layout stuff */
	
	body {background-color: #ffffff;}

	#content {
		background-color: #ffffff;
		margin-right:1%;
		margin-left:1%;
		margin-top:5px;
		padding-bottom:10px;
		border:1px solid #000;
		text-align:left;
		min-width:500px;
		}
		
	#menufooter  {
		margin-bottom:20px;
		}
		
	.titles {
		font-size:14px;
		}
	
	.menus {
		border-left:1px solid #000; 
		border-bottom:1px solid #000;
		border-top:1px solid #000;
		border-right:10px solid #000;
		background:;
		color:#000;
		padding:10px;
		margin-bottom:10px;
		text-align:left;
		font-size:12px;
		}
	
	#menu {
		width:200px;
		padding:0px;
		margin-left:10px;
		margin-right:-3px;
		float:right;
		/*
		IE5x PC mis-implements the box model. Because of that we sometimes have
		to perform a little CSS trickery to get pixel-perfect display across browsers.
		The following bit of code was proposed by Tantek Celik, and it preys upon a CSS
		parsing bug in IE5x PC that will prematurly close a style rule when it runs
		into the string "\"}\"". After that string appears in a rule, then, we can override
		previously set attribute values and only browsers without the parse bug will
		recognize the new values. So any of the name-value pairs above this comment
		that we need to override for browsers with correct box-model implementations
		will be listed below.
		
		We use the voice-family property because it is likely to be used very infrequently,
		and where it is used it will be set on the body tag. So the second voice-family value 
		of "inherit" will override out bogus "\"}\"" value and allow the proper value to
		cascade down from the body tag.

		The style rule immediately following this rule offers another chance for CSS2
		aware browsers to pick up the values meant for correct box-model implementations.
		It uses a CSS2 selector that will be ignored by IE5x PC.
		
		Read more at http://www.glish.com/css/hacks.asp
		*/
		voice-family: "\"}\"";
		voice-family: inherit;
		}
	html>body #menu {
		margin-right:-3px;
		}
		
	p,h1,h2 {
		margin-top:0px;
		margin-bottom:10px;padding:0px 20px 0px 20px;
		}
		
	h2 {
		font-size:16px;
		padding-top:0px;
		margin-bottom:0px;
		}
		
	#title h1 {
		font-size:18px;
		border-top:1px solid #000;
		border-bottom:1px solid #000;
		border-right:10px solid #000;
		border-left:10px solid #000;
		margin-top:10px;
		padding-left:10px;
		padding-right:10px;
		padding-top:5px;
		padding-bottom:5px;
		}
		
	#title {
		background-color:;
		padding:0px;
		margin-right:-6px;
		margin-left:-6px;
		width:100%; /* I have to specify a width for IE5 PC, or else it ignores the top-margin of the H1 element therein. But 100% is different in browsers without IE5x PC's broken box model, so I have to use the CSS2 selector trick to set the width to auto for those browsers*/
		voice-family: "\"}\"";
		voice-family: inherit;
		width:auto;
		}
	html>body #title {
		width:auto;
		}
			
	a.sitelinksred { color:#c00; }
	a.sitelinksredorange { color:#f60; }
	a.sitelinksorange { color:#f90; }
	a.sitelinksyellow { color:#fc0; }
		
	a.anchor {
		font-size:12px;
		font-weight:normal;
		}
		
	p.anchor {
		text-align:right;
		}
	
	.links {
		margin-left:50px;
		margin-right:30px;
		}
	
	#layouts {
		font-size:12px;
		margin-left:10px;
		}


.comment {padding : 3px;
	margin : 5px 210px 5px 20px;
	border : 1px solid rgb(160,160,160);
	background-color:rgb(255,255,255);
	color:rgb(0,0,0);}


.comment .title {border-bottom :1px solid rgb(120,120,120);
	padding : 6px;}


</style>







</head>

<body>

<div id="content">

<div id="title"><h1>&lt;VeWtiFuL&gt; yea but now i started a garden center out of my driveway</h1></div>
<div id="menu">

<div id="login" class="menus">
<form action="/index.php" method=post>
<div id="logintitle" class="titles"><strong>Login</strong></div>


	<table>
	<tr><td>Username: </td><td><input type="text" name="username" size="10"></td></tr>
	<tr><td>Password: </td><td><input type="password" name="password" size="10"></td></tr>
	<tr><td><td><input type="submit" value="Login" name="Login"></td></tr>
	</table>
	<a href="/index.php?option=forgot">Forgot your password?</a><br/>
	<a href="/index.php?option=register">Register for a Login</a><br/>


















</form>
</div>


<div id="logs" class="menus">
<div id="logstitle" class="titles"><strong>Mud Logs</strong></div>


<!-- PHP Generated Message: Authlevel: 0-->

	<a href="/index.php?option=recentlogs">Recent Logs</a><br/>
	<a href="/index.php?option=recentlogs&lognbr=10">Older Logs</a><br/>
	<a href="/index.php?option=recentlogs&lognbr=0">Newer Logs</a><br/>
	<a href="/index.php?option=toplogs">Top Rated Logs</a><br/>
	<a href="/index.php?option=mostviewedlogs">Most Viewed Logs</a><br/>
	<a href="/index.php?option=uploadlog">Upload A Log</a><br/>
	<a href="/index.php?option=collections">Log Collections</a><br/>
	<a href="/index.php?option=quicklist">Log Quicklist</a><br/>






















</form>
</div>

<div id="links" class="menus">
<div id="linkstitle" class="titles"><strong>Mud Links</strong></div>

<a href="http://arcticmud.blogspot.com/">Arcticmud Blog!</a><br><br>
<a href="http://mudlogs.foghaven.net/">Xanitha's Mud Log Page</a><br>
<a href="http://pollux.ldz.lv/~punk/upload/index.php">RGB Mud Log Page</a><br>
<a href="http://tirannon.tky.hut.fi/arctic/">Lasse's Logs (not current)</a><br>
<a href="http://normstorm.com/template/m-news.html">Oligo's Logs (not current)</a><br><br>
<a href="http://mud.arctic.org/forum/">Arctic Mud Forums</a><br>
<a href="http://mud.arctic.org/">Arctic Mud Homepage</a><br><br>
<a href="http://www.topmudsites.com/cgi-bin/topmuds/rankem.cgi?id=just">Vote for Arctic<br>on Top Mud Sites</a></div>

<div id="logs" class="menus">


<!-- PHP Generated Message: MENU AUTHLEVEL 1-->

<!-- PHP Generated Message: SQL: SELECT * FROM poll_desc ORDER BY pollID DESC-->
<p><b><i>What is the worst change this wipe?</i></b><p><form><p>
<input type=radio value=0 name=voteid>hp gain randomness<br>
<input type=radio value=1 name=voteid>+heal items<br>
<input type=radio value=2 name=voteid>every high level zone bugged<br>
<input type=radio value=3 name=voteid>road shortening<br>
<input type=radio value=4 name=voteid>rolling system<br>
<input type=radio value=5 name=voteid>nosummon items<br>
<input type=radio value=6 name=voteid>all of the above<br>
<input type=submit name=action value='Vote'>
 <input type=submit name=action value='Results'>
<input type=hidden name=pollid value=137><input type=hidden name=option value=poll></form><p><a href="/index.php?option=poll&action=new">Submit a Poll</a><br><a href="/index.php?option=poll&action=listpolls">List Previous Polls</a>






















</form>
</div>
</div>

<!-- normal content -->

<p>


<!-- PHP Generated Message: OPTION IS: viewlog-->

<!-- PHP Generated Message: SQL QUERY: SELECT * FROM logs_db where id = 494-->

<!-- PHP Generated Message: SQL QUERY: SELECT * FROM logs_view where viewersIP='207.241.232.16' and logid='494'-->

<!-- PHP Generated Message: IP not in db-->

<p>
<b><font size="3">
JMC ActiveScripting Tutorial</font></b>
<p>
POV: 
N/A<p>
Log Rating:
3.0000<!-- pull log rating from db -->
<!-- display logos + portion of logos for rating -->
<p>
<i>
This implements a basic mem-counter using Perl ActiveScripting. NOTE: The last submission lost some chars which screwed up some of the code... hopefully this one will work better.</i>
<p>
<p>

Version 3.26 of Jaba Mud Client (JMC) has a nifty little feature called ActiveScripting built into it.  Basically, this lets you use an ActiveScript language within JMC, which means you can use languages (such as JavaScript, Visual Basic, or even Perl) on the stuff your client receives.  Some of you might not realise the potential of this, or how powerful these scripts can be, so I'm going to give a quick tutorial on how to build a mem-counter.<br />
<br />
I bet most of you have seen the tintin version of a mem-counter, which requires dozens of #var and #sub commands, which can make your environment pretty messy and cluttered if you type in a &quot;#var&quot; command.  This is (I think) a much more elegant, and easily maintained way of doing the same thing.<br />
<br />
This tute requires at least a reasonable knowledge of Perl (or programming), and I'm not going to just give you the script... I'm going to teach you how to make your own scripts.<br />
<br />
STEP 1<br />
<br />
If you don't have it, install Perl (ActivePerl).  This can be downloaded from www.activestate.com.  The next step is to use Perl in your JMC.  After rebooting, simply choose Options-&gt;Options-&gt;Scripting in JMC, and then select PerlScript from the Script language choice box, and you're ready to use Perl on your MUD data.<br />
<br />
The most important file that JMC uses is settings\commonlib.scr.  This is the file that is loaded and contains the script(s) that will be parsed by JMC.<br />
<br />
So, what to do first: install an Event Handler.  This sounds pretty complicated, but don't worry about it - it's easy.  Simply add the following line to your commonlib.scr file:<br />
<br />
jmc.registerhandler(&quot;Incoming&quot;, &quot;OnIncoming()&quot;);<br />
<br />
This command makes JMC call the function &quot;OnIncoming()&quot; whenever text arrives from the mud.  This would be a good time to check if it's working properly, so type in the following below the &quot;registerhandler&quot; line:<br />
<br />
sub OnIncoming<br />
{<br />
<br />
jmc.showme(main::Event);<br />
<br />
}<br />
<br />
&quot;jmc.showme&quot; is a function that ActiveScripting uses to put text on the screen.  You can use it with variables, or just plain text.  Here, we've passed it the variable main::Event, which actually contains the line from the mud, which triggered the event.  Confused? Don't be.  All this should do is produce a duplicate line for everything you see from the mud.  Fire up JMC (or restart the script engine if it's already open) and connect to a mud.  If you see a copy of each line, then it's working.  If not, then recheck that you've done everything (including saving the commonlib.scr file) and restart JMC.  If it's still not working, then too bad, because I can't help you =)<br />
<br />
So we have a working PerlScript function.  Now, the mem-counter.  First off, choose how you're going to store the mem data.  A perl hash is what I chose, and I think it's probably the best, and easiest data structure to use.  This means that we can have a unique spellname, with a number representing how many of that spell are memed, like so:<br />
<br />
'magic missile' =&gt; 4<br />
'lightning bolt' =&gt; 2<br />
<br />
Now, to parse the mem data from the mud, and use it to build the hash.  Add the following vars, but make sure these are GLOBAL vars - to make sure they're global, DO NOT put them within the &quot;OnIncoming&quot; function.  You must put them outside of any other functions (I usually put all my variable declarations at the start of the file, before any functions or any other scripts):<br />
<br />
my %memcount; # The hash<br />
my $spell;    # Temp var to store the spellname<br />
my $count;    # Temp var to store the number<br />
<br />
Next, we parse the line from the mud (main::Event) and use it to extract the spellnames and numbers (these must go INSIDE the &quot;OnIncoming&quot; function):<br />
<br />
while (main::Event =~ /\[\s*(\d+)\](\w+ ?\w+ ?\w+)/g) {<br />
$count = $1;<br />
$spell = $2;<br />
$memcount{$spell} = $count;<br />
jmc.showme(&quot;Added $count types of $spell.&quot;);<br />
}<br />
<br />
If you don't understand the regular expression, then perhaps you should go read a regexp tutorial.  This function will construct the hash, and you'll notice the showme function, that will display on your screen every time it's added.  If you dont like (I just put it in for debugging/testing purposes really) then remove it.  But keep it in and run it through the mud, just to check that it's working properly.<br />
<br />
Uh oh, a small bug.  You might have noticed that it even adds stuff currently being memed (ie. that's not ready to cast).  No problem, we'll just use a variable to turn it on and off.  Add another var called $continue (again, make sure it's global and NOT within any other functions).  We'll set this var to 1 if we're to build the hash, and to 0 if we want to ignore the text from the mud.<br />
<br />
if (main::Event =~ /Spells currently memorized:/) {$continue=1;}<br />
if (main::Event =~ /Spells being memorized:/) {$continue=0;}<br />
if (main::Event =~ /Spells left/) {$continue=0;}<br />
<br />
These 3 regexps turn on the variable, and turn it off when we no longer want/need the data.  Now, we add this $continue bit to the code (the original text is indented to make it easier to understand what to add):<br />
&lt;PRE&gt;<br />
if ($continue==1) {  # If $continue is 1, then add the data to the hash<br />
	while (main::Event =~ /\[\s*(\d+)\](\w+ ?\w+ ?\w+)/g) {<br />
	$count = $1;<br />
	$spell = $2;<br />
	$memcount{$spell} = $count;<br />
	jmc.showme(&quot;Added $count types of $spell.&quot;);<br />
	}<br />
}	# This closes off the &quot;continue&quot; bit<br />
&lt;/PRE&gt;<br />
Hopefully this will now only load your real mem data.  At this point, we should have the hash with all the proper data, so now we make it show us the count.  To do this, we match on the line &quot;You utter the words&quot;:<br />
<br />
if (main::Event =~ /You utter the words, '(.+)'/) {<br />
$spell = $1;<br />
$memcount{$spell}--;	# Subtract one from the table<br />
jmc.showme(&quot;You have $memcount{$spell} $spell\'s left!&quot;);<br />
}<br />
<br />
Remember to keep this little bit of code within the OnIncoming function, otherwise it wont work.  So fire it up, get a mem listing, and cast a spell.  Hopefully, everything works perfectly, and you should see a count of how many spells you have left.  If it doesn't... well, I can't help you.  The stuff that I've listed above works fine for me, but you have to put everything in the right place (ie. script code within the OnIncoming function, variables not in any functions) and you have to have at least a small knowledge of programming or scripting.<br />
<br />
So there you have it, a pretty basic mem counter for ActivePerl/JMC.  The next step is up to you, you might wanna fancy it up, make it all into one line, put in warnings for group members, or anything else you want.<br />
<br />
Contacting me:<br />
Bleh... I dunno... write a message on the board or something. *shrug*<br />
<br />
Hope this has been helpful.
<p>


<!-- PHP Generated Message: SQL QUERY: SELECT * FROM logs_vote where votersIP='207.241.232.16' and logid='494'-->

<!-- PHP Generated Message: NOT VOTED-->
<form method="POST" action="/index.php?option=viewlog&logid=494">
<input type="hidden" name="rate" value="true">
<table border="1" cellspacing="0" cellpadding="1" align="center">
  <tr>

    <td>
      <table border="0" cellspacing="0" cellpadding="4" align="center">
        <tr>
          <td rowspan="2" valign="top" align="center"><img src="../images/rate.gif" border="1" alt="Vote On This Log"></td>
          <td align="center"><input type="radio" value="-5" name="score"></td>
          <td align="center"><input type="radio" value="-4" name="score"></td>
          <td align="center"><input type="radio" value="-3" name="score"></td>
          <td align="center"><input type="radio" value="-2" name="score"></td>
          <td align="center"><input type="radio" value="-1" name="score"></td>
          <td align="center"><input type="radio" value="0" name="score" checked></td>
          <td align="center"><input type="radio" value="1" name="score"></td>
          <td align="center"><input type="radio" value="2" name="score"></td>
          <td align="center"><input type="radio" value="3" name="score"></td>
          <td align="center"><input type="radio" value="4" name="score"></td>
          <td align="center"><input type="radio" value="5" name="score"></td>
        </tr>
        <tr>
          <td align="center"><font class="VoteNumber">-5</font></td>
          <td align="center"><font class="VoteNumber">-4</font></td>
          <td align="center"><font class="VoteNumber">-3</font></td>
          <td align="center"><font class="VoteNumber">-2</font></td>
          <td align="center"><font class="VoteNumber">-1</font></td>
          <td align="center"><font class="VoteNumber">0</font></td>
          <td align="center"><font class="VoteNumber">1</font></td>
          <td align="center"><font class="VoteNumber">2</font></td>
          <td align="center"><font class="VoteNumber">3</font></td>
          <td align="center"><font class="VoteNumber">4</font></td>
          <td align="center"><font class="VoteNumber">5</font></td>
        </tr>
        <tr>
          <td align="center"><input type="submit" value="Vote" name="votelog"></td>

          <td align="center" colspan="5">
            <p align="left"><font class="VoteText">Hated It</font></td>
          <td align="center">&nbsp;</td>
          <td align="center" colspan="5">
            <p align="right"><font class="VoteText">Loved It</font></td>
        </tr>
      </table>
    </td>

  </tr>
</table>
<input type="hidden" name="ratelogid" value="494">
<input type="hidden" name="rateuser" value="">
<input type="hidden" name="rateip" value="207.241.232.16">
</form>









	</div>
</div>

</body>
</html>








